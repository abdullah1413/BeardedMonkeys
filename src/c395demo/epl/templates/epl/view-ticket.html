{% extends 'epl/index.html' %}

{% block content %}

<html>
<head>
	<title>View Ticket Page</title>
</head>
<body>
	<h1>View Ticket Page</h1>
	
    <div class="right">
        <p>
            <a class="button" href="{% url 'manage' %}"><i class="fa fa-chevron-circle-left" aria-hidden="true"></i> Back</a>
            <a class="button" href="edit.asp"><i class="fa fa-pencil" aria-hidden="true"></i> Edit</a>

            <!--check if the user is owner of the ticket. And if he is ownere, he can click resolve button; if not, he can't-->
            {% if user.username == CustID %}
                <a id="myBtn_{{ CallID }}" class="button" href="#">
                    {% if CallStatus == "Open" %}
                        <i class="fa fa-check" aria-hidden="true"></i> Resolved
                    {% else %}
                        <i class="fa fa-check" aria-hidden="true"></i> Re-open
                    {% endif %}
                </a>
            {% else %}
                <a class="button disabled" href="#" style="background-color:grey;">
                    {% if CallStatus == "Open" %}
                        <i class="fa fa-check" aria-hidden="true"></i> Resolved
                    {% else %}
                        <i class="fa fa-check" aria-hidden="true"></i> Re-open
                    {% endif %}
                </a>
            {% endif %}
            <!--<a class="button" href="resolve.asp"><i class="fa fa-check" aria-hidden="true"></i> Resolved</a>-->
        </p>
        <p><span style="font-weight:bold;">Posted by</span> {{ CustID }}</p>
    </div>

    <H2><span style="font-weight:bold;">Ticket ID:</span> {{ CallID }}</H2> 
   
    <P><span style="font-weight:bold;">Posted on</span> {{ RecvdDate }} </P>
    <P><span style="font-weight:bold;">Category:</span> {{ Category }} </P>
    <P><span style="font-weight:bold;">Status:</span> <span id="status_{{ CallID }}">{{ CallStatus }}</span></span></P>
     
    {% if Category == "Hardware" %}
        <p> <span style="font-weight:bold;">Type of equipment: </span> 
        {{ EquipType }} </p>
        <p> <span style="font-weight:bold;">Asset tag: </span> 
        {{ AssetTag }} </p>
        <p> <span style="font-weight:bold;">Name of device: </span> 
        {{ DeviceName }} </p>
        <p> <span style="font-weight:bold;">Error message displayed: </span> 
        <br>{{ ErrorMsg }} </p>
    {% endif %}
    
    {% if Category == "Software" %}
        <p> <span style="font-weight:bold;">Which system?: </span> 
        <br>{{ System }} </p>
        <p> <span style="font-weight:bold;">Is the system completely offline/broken?: </span>
        <br>{{ Offline }} </p>     
    {% endif %}
    
    {% if Category == "Service" %}
        <p>Category details currently not implemented!</p>
    {% endif %}
    
    {% if Category == "Password" %}
        <p>Category details currently not implemented!</p>
    {% endif %}
    
    {% if Category == "General" %}
        <p>Category details currently not implemented!</p>
    {% endif %}

    <p><span style="font-weight:bold;">Further details: </span> 
    <br>
    {{ Description }} </p>

    <div id="myModal" class="modal">
      <!-- Modal content -->
      <div class="modal-content">
          <span class="close">&times;</span>
          <p id="modalText">Are you sure the ticket has been resolved?</p>
          <a id="nButton" class="button modalButton" href="#" style="float:right">No</a>
          <a class="button modalButton" style="visibility:hidden;"></a>
          <a id="yButton" class="button modalButton" href="#" style="float:right; margin-right:20px;">Yes</a>
      </div>
    </div>

    
</body>


</html>

{% endblock %}
